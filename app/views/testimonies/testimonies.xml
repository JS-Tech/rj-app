<Page loaded="loaded" xmlns:navbar="views/components/navbar">
  <Page.actionBar>
      <ActionBar title="Testimonies">
      </ActionBar>
  </Page.actionBar>
  <GridLayout columns="*" rows="auto, *, 60">
      <GridLayout columns="3*, *" rows="auto" row="0" visibility="{{ isSignedIn ? 'visible' : 'collapsed'}}">
        <TextView text="{{ message }}" height="100" col="0" />
        <Button text="Send" tap="newTestimony" class="submit" col="1" />
      </GridLayout>
      <ScrollView row="1">
        <Repeater items="{{ testimonies }}">
            <Repeater.itemTemplate>
              <GridLayout columns="*" rows="auto, auto">
                <Label text="{{ author }}" row="0"/>
                <GridLayout columns="*, auto" rows="*">
                  <TextView id="testimony" testimonyId="{{ id }}" text="{{ message }}" col="0"/>
                  <Button text="Edit" tap="editTestimony" visibility="{{ canEdit ? 'visible' : 'collapse' }}" col="1"/>
                </GridLayout>
              </GridLayout>
            </Repeater.itemTemplate>
        </Repeater>
      </ScrollView>
    <navbar:navbar row="2"/>
  </GridLayout>
</Page>
